## Region Opening + Diffusion Goal Sampler Defaults
## Use with:
##   python sequential_ml_collection.py \
##     --config-yaml python/namo/data_collection/region_opening_ml_collection.yaml
##
## Or via script:
##   CUDA_VISIBLE_DEVICES=2 ./scripts/run_region_opening_ml_sequential.sh \
##     --start-idx 0 --end-idx 100

# Core execution
output_dir: /common/home/dm1487/robotics_research/ktamp/sage_learning/outputs/2025-11-26/15-04-18/results_16samples
start_idx: 0
end_idx: 6000
algorithm: region_opening
workers: 1
episodes_per_env: 1

# Generic planner limits (compatibility placeholders)
max_depth: 5
max_goals_per_object: 5
max_terminal_checks: 5000
search_timeout: 300.0
goals_per_region: 10  # Number of robot goal samples per region for validation

# Region opening parameters
region_allow_collisions: true
region_max_chain_depth: 1
region_max_solutions_per_neighbor: 1
region_frontier_beam_width: 1000
region_max_recorded_solutions_per_neighbor: 1

# Goal sampler configuration
goal_sampler: ml
ml_goal_model: /common/home/dm1487/robotics_research/ktamp/sage_learning/outputs/2025-11-26/15-04-18
ml_device: cuda  # Use "cuda" (respects CUDA_VISIBLE_DEVICES) or "cuda:0", "cuda:1", etc.
ml_samples: 16  # Increased from 32 for better ML goal coverage
ml_min_goals: 1
ml_match_position_tolerance: 0.05   # meters (tightened from 0.2)
ml_match_angle_tolerance: 0.1       # radians ~5.7Â° (tightened from 0.35)
ml_match_angle_weight: 0.5
ml_match_max_per_call: 999  # Allow all ML goals to be aligned (was 8)
ml_sampler_method: ddim  # Override sampler: flow_matching=[euler, midpoint, rk4, dopri5], diffusion=[ddpm, ddim] (null = use training config)
ml_num_steps: 20      # Override integration steps (null = use default 20)
primitive_data_dir: data

# Paths
xml_dir: /common/home/dm1487/robotics_research/ktamp/ml4kp_ktamp/resources/models/custom_walled_envs/aug9/medium
config_file: config/namo_config_complete_skill15.yaml
# manifest: /path/to/manifest.txt  # Pre-generated file list for fast loading (use generate_xml_manifest.py)

# Optional pipeline features
verbose: false
filter_minimum_length: false
smooth_solutions: false
max_smooth_actions: 20
refine_actions: false
validate_refinement: false

